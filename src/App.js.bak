import React, { Component } from 'react';
import { BrowserRouter as Router, Route } from 'react-router-dom';
import TransitionGroup from 'react-transition-group/TransitionGroup';

import HomePage from './containers/HomePage/HomePage';
import BoatsPage from './containers/BoatsPage/BoatsPage';
import RatesPage from './containers/RatesPage/RatesPage';
import PoliciesPage from './containers/PoliciesPage/PoliciesPage';
import ContactPage from './containers/ContactPage/ContactPage';
import Boats from './components/Boats/Boats';
import Home from './components/Home/Home';


import AppBar from './containers/AppBar/AppBar';
import Footer from './components/Footer/Footer';
import withTracker from './components/withTracker';

import './bulmaVars.css';
import 'normalize.css';

import './App.css';

const firstChild = props => {
  const childrenArray = React.Children.toArray(props.children);
  return childrenArray[0] || null;
}


class App extends Component {
  render() {
    return (
      <Router>
        <div>
          <AppBar />
          <Route 
            exact 
            path="/" 
            children={({ match, ...rest }) => (
              <TransitionGroup component={firstChild}>
                {match && <Home {...rest} />}
              </TransitionGroup>
            )} />
          <Route 
            path="/boats" 
            children={({ match, ...rest }) => (
              <TransitionGroup component={firstChild}>
                {match && <Boats {...rest} />}
              </TransitionGroup>
            )} />
            <Route path="/policies" component={withTracker(PoliciesPage)} />
            <Route path="/contact" component={withTracker(ContactPage)} />
          <Footer />
        </div>
      </Router>
    );
  }
}

export default App;
